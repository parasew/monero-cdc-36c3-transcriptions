# Harry Halpin

_**Critical Decentralisation Cluster 36c3 - Nym (Harry Halpin)**_

[youtu.be/-ToiJfmfLs0](https://youtu.be/-ToiJfmfLs0)

_**Abstract**_

Nym is a decentralized and incentived mix-network that can defeat even global passive adversaries. This event will launch the "alpha" Rust mix-net of Nym, and demonstrate the use of validators to create anonymous authentication credentials to access the mix-net.

_**Transcription**_

_Diego:_ All right everyone, we got our next talk with Harry Halpin here. He's gonna be talking with us about Nym and what they're doing for the privacy space, the ecosystem. He's got a cool orange shirt, that's what I noticed right off the bat. So hopefully he can also tell us about where to get some of those, because I also want to be very aggressive in my street wear. So I'm gonna hand this off to you. Go and tell us all about Nym. Let's get my hand.

_Harry:_ Ok, so how do I get my slides up? Is there a button I press or… Oh, ok, cool, ok. So basically the way we view it, is that you know the defining problem of the next 10 years will be mass surveillance. Ultimately as we see infrastructure like the Libra rolled out, even what appeared to be revolutionary, a blockchain used the publicly record financial track transactions, will be turned against us and transformed into a tool of total control. And on the other hand the kind of NSA mass surveillance, that Snowden has warned us about, is now commercialized, being done by many different corporations in almost every single country. And we still, despite you know years of CCC and Tor Funding, still, don't have any software that can resist passive global adversaries that can control 80-90 percent of network and observe it like the NSA.

So that's essentially the problems, and these problems that essentially all Internet traffic is observable, applies to all blockchain traffic as well. And even when you use Monero, including Atlantis, zero knowledge proofs like ZCash, and of course the Ethereum and Bitcoin, even if you manage to secure the onchange transactions, the peer-to-peer network traffic analysis can reveal who sent what traffic — that's what we recently saw and the attacks by Kenny Patterson and everyone else on ZCash. And this applies also to Signal right, so you can just watch the traffic, even though we don't know the exact messages, we can watch the traffic going in and out. And I love Moxie, but it's a ridiculous problem, going in and out of the Signal servers. And Tor itself a lot of people think it's like allows, actually obscures metadata. But Tor effectively only obscures the IP address, the geolocation to some extent, and the identity of the last of your first hop into the network. So Tor doesn't defend against more complex and more powerful metadata attacks. As you know Snowden discussed in his recent book “Permanent record”, Tor is really focused on a problem anonymous Google searching for things like the CIA to basically prevent them from having to make fake companies to host their fake searches, and doesn't actually obscure against the passive global adversary.

And so just to summarize we clearly have this problem of metadata being revealed, but also we can learn a lot of lessons from the Tor network. Volunteer services in Tor, while the traffic the users of Tor have increased dramatically, the amount of nodes has not increased dramatically. They have increased in capacity, there's a few large well-funded subsidized nodes CCC, Chaos Computer Club, runs one, but the actual diversity and the geographical diversity nodes has kind of leveled off remain the same for the last few years, despite the rising usage. As we see with the recent YouTube, crypto ban, we're also seeing increased reliance on centralized services which are then censoring content.

So how we just what happened is that we approached the European Commission and other folks. A few years ago after the Snowden revelations we said: “Look you need to build, Europe can't trust only Tor, Europe needs its own more powerful infrastructure to basically resist NSA level surveillance”. So that's what led to startups like Chain Space which were unfortunately acquired by Facebook to help build the Libra that led to the Panoramix research project which did allow the fundamental research, and that's the kind of strand that led to this all, the free software in this project.

So what a Mixnet does, it's similar Tor in many regards. There are multiple hops but unlike Tor it does two very special things: it adds decoy traffic and it adds, this decoy traffic is like fake traffic, is not enough traffic going through the network, and it adds timing obfuscation by basically adding delays to each hop to prevent deanonymization attacks on the timing. And similarly to Tor it's a general-purpose system that can build very large anonymity sets by running diverse applications.

So this is kind of what a Mixnet does. Sphinx packets, the same packet format used in the Lightning Network, comes into the network, Dummy Packets are added as needed actually the more traffic you need the less dummy packets you need. Each, at each hop there's a timing delay. If it eventually the packets exit and are fully anonymized even against global passive adversaries.

And there's been a lot of work, a lot of it this has been discussed at CCC over the last three or four years, primarily by David Stanton. So Panoramix funded David to work on that called Katzenpost for using a Mixnet over email. And that's good but there's still some issues we're going to discuss with Katzenpost.

And then recently Katzenpost was for somehow by some kind of fairly random person to build an Ethereum transaction anonymization network but actually it's just Katzenpost.

And this there's some problems that are inherent in the fundamental research around mixed networking. So these are the kind of papers we rely on, but this next slide and the rest of the talk is new work, which is yet, which is currently either under reviewer, unpublished, but which goes into the big issues that Nym is solved building off the Loopix which underlies both Katzenpost and Meson.

So essentially one of the largest problems that Tor faces but also various Loopix forks such as Katzenpost and Meson is essentially it's a centralized and permission PKI. So there in order to use the mix network you have to know who's the network and that relies on some set of nodes being determined by central authority or voting authority — it's kind of unclear who gets to pick those nodes. And it's very dangerous because obviously a corrupt central PKI could defeat the security of the whole network. Most importantly it's unclear if using without the correct parameters Katzenpost and Meson, other Loopix forks actually adds any anonymity at all to your traffic. It's definitely, it's questionably better than Tor, because the time of the delays and the amount of cover traffic depends on the amount traffic coming in the network, and that has to be set. If you set it just once the traffic changes, those parameters may never, may not know longer give you a good anatomy set, and if you need to basically be able to dynamically set the amount of cover traffic and the delays. And lastly you know Meson specialized for Ethereum, Katzenpost specialized for depending on how David feels catchever or whatever messaging frameworks, but the problems by specializing your mixed network for a single use case your anonimity set is the amount of people in that use case. So if you specialized for just the Ethereum validators your anonimity set is the number of Ethereum validators out there that use you, which is like basically probably not very many, if you spent, if you make an awesome you know OTR version for enabled whistleblower platform, your anonymity set is the amount of people who are whistleblowing on that platform, it's probably quite small, maybe even be more dangerous use that platform than not, right. So these are legitimate problems, so you need a diverse set of applications, you need to dynamically parameterize the network, and you need to actually be decentralized.

So how we solve these issues is we basically, not surprisingly use a blockchain to store the PKI and other information necessary for operations for the Nym mixnet in a decentralized fashion. So there's no central authority that being corrupted, we just have a sort of standard consensus around the PKI. Currently this sits on Tindermen. We need to basically be able to capture the amount of traffic and the patterns in it in the input without deanonymizing the users. So for that we use what's called anonymous authentication credentials, which are based on a revision of the Coconut protocol which was discussed at Chaos Computer Camp last year, but essentially we have validators which can anonymously measure the traffic and use that to feed the parameters for each epoch, and we basically choose the nodes by looking at, by doing essentially a check on their quality of service and rewarding them using Nym tokens for actually effectively mixing the node, the network traffic.

So the way that the way to think about it is there's a potential amount of traffic going through a mixed network which we call the nympool, somewhat like the nympool, and then there's the amount traffic that actually is mixed and get through the network and every epoch the nodes which successfully can prove that they've mixed the traffic basically get rewarded. And this allows us to dynamically scale the anonymity and the speed of the network as the traffic grows.

And effectively the number of tokens is indexed the capacity of the network, and the mix-nodes and validator is rewarded for quality of service, and nodes that don't deliver packets, that don't mix them are kicked out and when new traffic comes in new nodes are added. And so the way the thing that's proof of mixing rather than mining, and we do this fairly, and this is a perhaps a whole talk by itself, but effectively the concept is the validators do a commitment to randomize paths the network the randomize paths are chosen through a VRF seated with a randomness pool, each, at each sort of a hop of each Sphinx packet there's a commitment to a Merkel tree, by the end of the epoch you reveal your commitments of to the randomize paths and the Merkel tree then can show who's delivering which packets and those people are rewarded. And that's a really good idea from I think Leaf Rigi originated idea calling it secret shopper traffic. And he originated for Tor bits a great idea for mix networks. And Jeff Burgess was also kind of thinking in this direction. We have transaction fees as well so if you send cryptocurrencies in network on the first hop you know it can be revealed that you're saying cryptocurrency out or the last hop and you can basically we can take a fee to help pay for services, but we also want to support free services and free services you know can be supported simply by time locking tokens and of course they're sent out because eventually we don't want to have to reward people by inventing magical internet money, we would prefer that people actually produce high-value services.

We have a whole complex validator system which I will only briefly touch upon, but effectively we can transform tokens, the credentials that not only lets us kind of measure the amount of traffic going through network to set the parameters to guarantee privacy. But this measurement is decentralized, it's anonymous, we use re-randomization cryptography, so you can't link a credential to a user. We include selective disclosure for both private and public attributes, and pseudonym can be supporting lots of other advanced features. So this is the kind of network flow, or basically you convert things that credentials you shouldn't even mix that and you get to service, and the service checks your credential against the blockchain.

So this is our overarching timeline, you can view the code currently on GitHub. We're going to basically do debugging tomorrow, so everyone's invited and that will hopefully let us launch the initial alpha mixnet. We'll try to more officially launch it once we debug things tomorrow. And by the end of 2020 after various iterations will launch the mainnet to end mass surveillance. Hey humble but hopefully accomplishable goal on the kind of hacker wars that will take over in 2020.

And we've taken all the code and we have the docs for the code all online so they're quite easy to view. You can see we have the mix that code the valid err code we are currently transitioning the mixed net out of go to rust, because we got like a 15 X performance increase the vote to err code is still go, will probably eventually transfer all the code to rust but for the initial kind of testnet well we will install both rust for the mix nodes and some go for the validators.

We have you know Amir talking and friends are working on wallets independently of us built on top of this code base, you can look at his code there, I think it's only command line so not so exciting but it does send stuff through the mixnet. We have someone Roberto has built a pretty awesome cross-platform mobile app already on top of our network

And so yeah, so it's I think we're basically having our workshop at 2 p.m. tomorrow. If you can't make the workshop or if you can this is the first revelation of the validator sign up, so you can sign up to be a validator, we'd be happy to get more validators and mix nodes on board, we're looking for people that can really run you know, really know how to run secure servers, and we're happy to work with you to set up the code to make sure distributed key generation works, and all of the kind of more high-tech components of the software. And we're always available for any kind of question both on stage and off stage, and all of the people that manage to successfully set up a validator or get one of our hot orange, because that's all going to happen to us if we don't actually in mass surveillance hot t-shirts, and even if you don't set up a mix node or validator we forgive you. You should still protect yourself and we have these how do you say questionable protect your assets Nym condoms. So yeah, so anyways I'm here to answer any questions. I hope that was informative and we think that basically the big bet of the 2020s will be: can we use the technology around cryptocurrency and blockchains to basically build a scalable more privacy enhance network level infrastructure that can really end large-scale mass surveillance. Thanks a lot. Ok go for Jesus, okay in order basically me. That way.

_Audience:_ Thank you yeah. Great speech really inspiring. Love it. Um my question is around whether you can highlight the differences between what you're doing and what something like Orchid is doing on Ethereum…

_Harry:_ So yes, I could definitely analyze that. It's also good to think about Orchid and Tor. So essentially if you're building something like Tor which is two, symptom make privacy enhance synchronous let's say a synchronous video or JavaScript web browsing. Effectively it's going to be very hard to beat Tor, and Orchid’s going to essentially have some incentivized VPN which will be somewhat similar to Tor on some level. But the thing with those kinds of systems is that they're they do decentralize the traffic but they don't provide that privacy against powerful adversaries, because the adversary can watch the timing of the packets and even the bits in the packet go from one node to another, even the bits are encrypted an adversary can flip a bit and that packet and watch to see that flip bit come out on the other end. And that's the case for Tor, it's will be the case for Orchid, and it's essentially a trade-off between synchronous high speed VPN, TCP/IP style traffic, which essentially is what Tor and probably Orchid are specialized for, and asynchronous message based traffic that uses the Sphynx packet format and can re-anonimize at each hop, the cypher text is completely transformed it unlinkably cryptographically from the next hop, and when you add timing delays that's unlinkable in terms of metadata. And so that's the difference and so I don't think that Nym and Tor or against each other, I think they're actually complement, this is understanding I have with Roger is that essentially Roger was working on mixed Nets before Tor but at the time he's all the Internet's too slow, we can't do it. And there will still be a bit of latency loss with a mixed net because of the use of the Sphinx packet format. Now we're all looking to speeding that up like I said moving the rust gave us a 15 X speed-up but essentially when it comes down to the cryptography in order to use Sphinx you have to use a lot more asymmetric crypto operations to get that unlinkability. You cannot do that with Tor and Orchid, they have to use to get certain speeds, symmetric crypto. So that's that’s it, a bit complicated, but yes you know.

_Audience:_ Thank you. It's the first time I hear about mixnets, so it's very interesting. If I understand correctly so basically you're creating a Tor like network where you're solving the problem that you mentioned before by providing a reward for people who are running the nodes with tokens in this case right? Is this correct? And the second part is regarding the PKI. So you mentioned on the PKI so from what I understand which kind of protocol you using, are we talking about x509 certificates, and how do you solve this problem if you are using writing the PKI on top of the blockchain?

_Harry:_ Yeah, so, ok. So there's… Yes we're crazy general-purpose anonymity network which rewards nodes. So that's different than the volunteer basis of Tor. Now Roger and Tor thesis around not rewarding people, they said: “Well, look if you reward the nodes you're going to reward possibly adversarial behavior if everyone's volunteer-driven then all the behavior is altruistic and this attracts nicer people to run the nodes”. That's probably true, at the same point our general thesis is that it will altruism by itself scales up to certain point, but if like there's only so many like really I say privileged nice people that can run Tor exit nodes so we need to incentivize them at least to cover their legal cost and their cost of their hardware. So that's I think the main difference. In terms of the PKI, so literally we just store that… we don't use x509, think we just currently use you know 8559 keys, but which just allows that the them to announce their location and assign that location, and essentially rather than do a very complex certificate replication we basically just always at every epoch we just store the new consensus set of the nodes in the mixnet on every epoch. So essentially everyone the last epoch is revoked in the new epoch, everyone could have even totally new keys, and that's kind of how it works. So we try to avoid the very hard problem key revocation by essentially just always some people look at the latest timestamp version of the PKI on the blockchain. It's probably more interesting ways to do it. I know in Goldberg’s working on some great stuff but we aren't doing that stuff yet.

_Audience:_ Hey just a trick question. Let's say I want to run an in validator node right, and I want to hide my ass even Nym, can I do it?

_Harry:_ There is a theoretical problem there which we have not quite solved. So the theoretical problem is not can you do it, because you can there's no reason why you can't hide any network level data in Nym and have a recursive Nym, so you're naming you’re your Nym self, but the problem of that is then we do have to be able to identify you somehow to reward you. All right and currently that's done with keys which are attached effectively to IP addresses for the validators. Now in the future we do hope to let that be done by basically saying: “Well if you want to run anonymous mixed nodes and anonymous validators you would use essentially a zero knowledge proof of key possession to prove you're in the key set and to prove you can, you are owed this much reward with revealing your keys”. That's totally not alpha network we're actually working Agga Lowes who's I think Dionysus is somewhere in the audience. Dionysus is advisor on this issue right now. But is a very hard issue because involves a little bit of complexity on the proofs front and probably law of attack surfaces. So we don't want to launch a test that look that. It would be really awesome to launch a main net with those features. Ok, one more question and maybe I don't know how much time…

_Audience:_ What is the maximum delay that you can put in so if you want to run Nym and basically very slow anonymity message store and forward Network to gain maximum protection against an global observer adversary, what would be the maximum delay that you could put in there?

_Harry:_ Yeah, it's interesting. It actually ends up being a little counterintuitive, because delays, and this is explained In Loopix paper which we build on, are effectively infinite right. The reason why you want to have effectively infinite delays or like sorry theoretically infinite delays is because you don't want the packets like in the classic chame install mixnet which is what the Luxor is, is you basically get it, you get a bunch of packets like you get five packets, and then you flush them all at once. But that reduces your anonymity set to five packets. If each packet has a randomized delay which could be infinite even the very very small probability, then the entire anonimity set of the network is almost infinite in theory. So that's a much we think better if slightly more probabilistic system, and we use what's called a Poisson distribution to choose those delays. Now the in reality what if your packet never gets delivered, that's why people stop using like the cypherpunk email remailer, it's like mix master and mix minion for example, and you want to know if your packets been delivered. So the Loop and Loopix is that you can basically get a loop message back that confirms your packets delivered. So if you send the packet and it never, you never get a confirmation, or you never see your transaction written to a blockchain, then you can just resend. In worst case you get two packets that with the same message and one of them's dropped. So in reality, now that's in theory, in reality what actually happens which is a little bit counterintuitive is the anonymity set depends on the delay, but it depends just as much on the amount of traffic coming with your network. So if you really want to be anonymous you really want to be, that's why I like we have a Dodge cryptocurrency use case, but we also have a messaging use case so the thousand people that do messaging can help hide the hundred people that do Doge cryptocurrency stuff, and this is very important because it's the amount of traffic that really gives your anonimity set and if your amount is too small then you have to crank up the delay to get reasonable anonymity. Currently in our test net things that the traffic we get anonymity set of a few that's measured in bits. And it's a few thousand by doing a few second delay. So realistically like five to seven seconds on a very small network with like a few hundred users will give you anonymity set of more or less all the users of that network. As the network gets more and more users, we can scale that back so let's say we get a thousand users, ten thousand users, then we can start scaling that delay back as more traffic comes in and eventually get it down to the millisecond level, which is what I think is much more acceptable for cryptocurrency use cases.

_Audience:_ So how do you determine if a node is actually mixing things and not just faking it? Do you have some kind of authority similar to the Tor network that measures these nodes or is that what the proof of mixing does?

_Harry:_ Yeah that's what proof it mixing does. So I'll just outline the basic algorithm. The basic algorithm is that there's a shared randomness pool, there's a verifiable random function which basically chooses sort of a seed and can produce a random path through the network. That path is not revealed. At the beginning of each epoch or time period that path is written to the chain and actually lots of them are written because you want lots of different tasks. And then the network just is passing packets and you don't know if the packet that you were passing is anonymous packet, because it's anonymize you don't know if it's basically a measurement traffic, or not measurement traffic, it could be a user traffic. And then what happens is that at the end of the epoch the commitment is revealed and at every, as the packets past nodes there's a replay attack building the Sphinx, so I replay attack protection of the Sphinx where each node basically commits to nonce which is the each packet to a Merkel tree that they host, what happens is when the VRF is revealed at the end of the epoch, the nodes can say: “Did I deliver that traffic or not?” And they can basically reveal their commitments to the nonces and that proves that they've delivered the packet or at least they tried. You now there's a catch, and that catch is, it's very hard to determine if someone has just dropped a packet and they're blaming the guy that they were supposed to send the packet to, or I sent the packet in the next guy, the next node drop the packet. So you really detect the link, so or to basically clean out the links what you do is you send multiple measurement traffic's through each node so you can get a statistical map of well “this guy you know, multiple nodes to this guy are dropping traffic” while so he's probably it's probably that no dropping traffic, and not the next hop. So you can consider it Rick Dudley use the term ‘parole officer traffic’ and I like that term, so you know if you've dropped some traffic then we double check you and if you keep dropping traffic then you get punished and eventually kicked out the network.

_Audience:_ That's some smart contract that is actually requiring all the nodes to open their commitment in the end and otherwise they get punished.

_Harry:_ Yeah you make, you have to reveal, otherwise I mean we don't know what you're doing. If we don't know what you're doing it's you could be acting maliciously and then you basically should eventually leave the network.

_Audience:_ Ok, I see. Thanks.

_Harry:_ And that's why it's complex to make it all super anonymous, because then we have to basically do you see our knowledge proofs of all of that rather than just do that fairly simple algorithm that Jeff and other folks have been thinking about in which we just kind of over viewed verbally.

_Audience:_ Sorry it's a bit of a like cheeky question about like blockchain in general. Why does everyone think that people who use blockchains and cryptocurrencies are criminals? Like why does everyone think that we're all just criminals?

_Harry:_ Oh I don't think people use cryptocurrencies are criminals.

_Audience:_ I don't either.

_Harry:_ Not yeah I think that you know when people basically, I think that the philosophical point is that if people think you're hiding something then it means you have some too hot, you've done something bad, maybe you've bought drugs over the internet or maybe you're sending nude pictures, or whatever they think is bad maybe. But at the same point I think there's essentially a philosophical debate were we're, what we believe is that the ability to basically hide yourself from adversaries which could be criminals, could be nation-states, could be anyone, is the precondition for human freedom. You can't act freely, and there's lots of evidence of this, if you're in a total control society of complete surveillance, so I think rather saying only criminals need privacy, you should sort of say well everyone needs freedom, and we just as people need free software, we should have freedom on the network level, freedom on our packet level to defend all of our internet transactions and those should be built in by default. They should have been built in by default on the original internet but the technology was not you know understood at the time, and this was again in the 70s a very long time ago, but now we have the capacity, we understand technology enough that we can at least build these overlay networks on top of the Internet in order to give us a guaranteed to some extent of freedom on the network level. That being said privacy is holistic right, so if you leak on another level you leak on a chain, your DAP or your app, you know user’s identifiers and leaks data you know, we can't stop that on the network level, so what you really need is you need to basically build what we call full stack or holistic privacy throughout the entire network, and that's really hard to do. So when I start with a network level because otherwise it's like you're building a castle on top of sand, you know that your privacy difficult on the network level, then it's just wiped out in general. So we hope that Monero and ZCash, and you know the validators we've attracted a lot of interests for running mix nodes of validators, we've attracted interest from Brave from Block Stream, from Binance, from ZCash, I mean we've attracted a very wide spectrum of interest in this technology. And so I think that that bodes well for like these large diverse use cases, that basically makes everyone more anonymous together. So definitely you know stop by tomorrow or at least sign up if you're interested, and will send out the documentation, and everyone will get these awesome orange t-shirts and otherwise the man will surveil you and send you to C Croton MO eventually, take care.

_Diego:_ Let's give a hand, thank you so much Harry, my biggest question was where to get those orange t-shirts and remember at the beginning of this talk and he just told me that. That's what I'm taking from this talk, I don't know about the rest of you. So we will be back in about five minutes with our next talk. We currently have a workshop going on with Swiss Cryptoeconomics that started maybe 10 minutes ago. So they're looking at kind of KYC/AML practices. By all means go check that out as well we have another workshop, that's gonna be coming up, let me pull this up um phone right here… blah blah Intro to POAP starts at 16:55, for 55 so in about 20-ish minutes, that's also I think going to be a Swiss Cryptoeconomics man. They're just killing it what the workshop these days, unless I'm falsely giving them credit and somebody is very offended over there right now. But coming up next we got the Digital Integrity of the Human Person with Alexis. He's going to be coming up here we're gonna get him all set up, so stick around if you're interested in that, and if you're not, stick around anyway to make him feel like he has an audience.
